<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Unit 2.4a Using Programs with Data, SQLAlchemy | Vivian Ni</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Unit 2.4a Using Programs with Data, SQLAlchemy" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Using Programs with Data is focused on SQL and database actions. Part A focuses on SQLAlchemy and an OOP programming style," />
<meta property="og:description" content="Using Programs with Data is focused on SQL and database actions. Part A focuses on SQLAlchemy and an OOP programming style," />
<link rel="canonical" href="https://vivianknee.github.io/FastPages/2023/03/13/AP-unit2-4a.html" />
<meta property="og:url" content="https://vivianknee.github.io/FastPages/2023/03/13/AP-unit2-4a.html" />
<meta property="og:site_name" content="Vivian Ni" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-03-13T00:00:00-05:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Unit 2.4a Using Programs with Data, SQLAlchemy" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-03-13T00:00:00-05:00","datePublished":"2023-03-13T00:00:00-05:00","description":"Using Programs with Data is focused on SQL and database actions. Part A focuses on SQLAlchemy and an OOP programming style,","headline":"Unit 2.4a Using Programs with Data, SQLAlchemy","mainEntityOfPage":{"@type":"WebPage","@id":"https://vivianknee.github.io/FastPages/2023/03/13/AP-unit2-4a.html"},"url":"https://vivianknee.github.io/FastPages/2023/03/13/AP-unit2-4a.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/FastPages/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://vivianknee.github.io/FastPages/feed.xml" title="Vivian Ni" /><link rel="shortcut icon" type="image/x-icon" href="/FastPages/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/FastPages/">Vivian Ni</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/FastPages/_pages/002apcspblog.html">APCSP Blog</a><a class="page-link" href="/FastPages/_pages/003lessons.html">Student Lessons</a><a class="page-link" href="/FastPages/about/">About Me</a><a class="page-link" href="/FastPages/Vocab/">Vocab</a><a class="page-link" href="/FastPages/categories/">Tags</a><a class="page-link" href="/FastPages/_pages/Frontend.html">Frontend</a><a class="page-link" href="/FastPages/search/">Search</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Unit 2.4a Using Programs with Data, SQLAlchemy</h1><p class="page-description">Using Programs with Data is focused on SQL and database actions.  Part A focuses on SQLAlchemy and an OOP programming style,</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2023-03-13T00:00:00-05:00" itemprop="datePublished">
        Mar 13, 2023
      </time>
       â€¢ <span class="read-time" title="Estimated read time">
    
    
      22 min read
    
</span></p>

    

    
      
        <div class="pb-5 d-flex flex-justify-center">
          <div class="px-2">

    <a href="https://github.com/vivianknee/FastPages/tree/master/_notebooks/2023-03-13-AP-unit2-4a.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/FastPages/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/vivianknee/FastPages/master?filepath=_notebooks%2F2023-03-13-AP-unit2-4a.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/FastPages/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/vivianknee/FastPages/blob/master/_notebooks/2023-03-13-AP-unit2-4a.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/FastPages/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
          <div class="px-2">
  <a href="https://deepnote.com/launch?url=https%3A%2F%2Fgithub.com%2Fvivianknee%2FFastPages%2Fblob%2Fmaster%2F_notebooks%2F2023-03-13-AP-unit2-4a.ipynb" target="_blank">
      <img class="notebook-badge-image" src="/FastPages/assets/badges/deepnote.svg" alt="Launch in Deepnote"/>
  </a>
</div>

        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul id="toc" class="section-nav">
<li class="toc-entry toc-h1"><a href="#Database-and-SQLAlchemy">Database and SQLAlchemy </a>
<ul>
<li class="toc-entry toc-h2"><a href="#Imports-and-Flask-Objects">Imports and Flask Objects </a></li>
<li class="toc-entry toc-h2"><a href="#Model-Definition">Model Definition </a>
<ul>
<li class="toc-entry toc-h3"><a href="#My-own-Database-Model:-Cars">My own Database Model: Cars </a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#Initial-Data">Initial Data </a>
<ul>
<li class="toc-entry toc-h3"><a href="#My-database-data-initializer">My database data initializer </a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#Check-for-given-Credentials-in-users-table-in-sqlite.db">Check for given Credentials in users table in sqlite.db </a></li>
<li class="toc-entry toc-h2"><a href="#Create-a-new-User-in-table-in-Sqlite.db">Create a new User in table in Sqlite.db </a>
<ul>
<li class="toc-entry toc-h3"><a href="#Create-and-Read-for-Car-database-(my-database)">Create and Read for Car database (my database) </a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#Reading-users-table-in-sqlite.db">Reading users table in sqlite.db </a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#Hacks">Hacks </a>
<ul>
<li class="toc-entry toc-h2"><a href="#Update-functionality">Update functionality </a></li>
<li class="toc-entry toc-h2"><a href="#Delete-functionality">Delete functionality </a></li>
</ul>
</li>
</ul><!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2023-03-13-AP-unit2-4a.ipynb
-->

<div class="container" id="notebook-container">
        
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Database-and-SQLAlchemy">
<a class="anchor" href="#Database-and-SQLAlchemy" aria-hidden="true"><span class="octicon octicon-link"></span></a>Database and SQLAlchemy<a class="anchor-link" href="#Database-and-SQLAlchemy"> </a>
</h1>
<blockquote>
<p>In this blog we will explore using programs with data, focused on Databases.  We will use SQLite Database to learn more about using Programs with Data.  <strong><em>Use Debugging through these examples to examine Objects created in Code</em></strong>.</p>
</blockquote>
<ul>
<li>
<p>College Board talks about ideas like</p>
<ul>
<li>Program Usage. "iterative and interactive way when processing information"</li>
<li>Managing Data.  "classifying data are part of the process in using programs", "data files in a Table"</li>
<li>Insight "insight and knowledge can be obtained from ...  digitally represented information"</li>
<li>Filter systems. 'tools for finding information and recognizing patterns"</li>
<li>Application. "the preserve has two databases", "an employee wants to count the number of book"</li>
</ul>
</li>
<li>
<p>PBL, Databases, Iterative/OOP</p>
<ul>
<li>Iterative. Refers to a sequence of instructions or code being repeated until a specific end result is achieved</li>
<li>OOP. A computer programming model that organizes software design around data, or objects, rather than functions and logic</li>
<li>SQL. Structured Query Language, abbreviated as SQL, is a language used in programming, managing, and structuring data </li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Imports-and-Flask-Objects">
<a class="anchor" href="#Imports-and-Flask-Objects" aria-hidden="true"><span class="octicon octicon-link"></span></a>Imports and Flask Objects<a class="anchor-link" href="#Imports-and-Flask-Objects"> </a>
</h2>
<blockquote>
<p>Defines and key object creations</p>
</blockquote>
<ul>
<li>Comment on where you have observed these working?  Provide a definition of purpose.<ol>
<li>Flask app object<ul>
<li>Seen this used in past projects in trimester 1 and 2</li>
<li>the purpose of the app object is to represent your web application. It is an instance of the Flask class, and it is used to configure your application and define its behavior. The app object is used to register routes, set up configuration variables, and define extensions that your application may use.</li>
</ul>
</li>
<li>SQLAlchemy db object<ul>
<li>I have observed this working in my own CPT project. I use a sqlite database and I use the db object to read and create the database.</li>
<li>the purpose of the SQLAlchemy db object is to interact with your application's database. It is an instance of the SQLAlchemy class, and it provides a high-level interface for interacting with databases using Python code.</li>
</ul>
</li>
</ol>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="sd">"""</span>
<span class="sd">These imports define the key objects</span>
<span class="sd">"""</span>

<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_sqlalchemy</span> <span class="kn">import</span> <span class="n">SQLAlchemy</span>

<span class="sd">"""</span>
<span class="sd">These object and definitions are used throughout the Jupyter Notebook.</span>
<span class="sd">"""</span>

<span class="c1"># Setup of key Flask object (app)</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="c1"># Setup SQLAlchemy object and properties for the database (db)</span>
<span class="n">database</span> <span class="o">=</span> <span class="s1">'sqlite:///instance/sqlite.db'</span>  <span class="c1"># path and filename of database </span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">'SQLALCHEMY_TRACK_MODIFICATIONS'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">'SQLALCHEMY_DATABASE_URI'</span><span class="p">]</span> <span class="o">=</span> <span class="n">database</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">'SECRET_KEY'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'SECRET_KEY'</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">()</span>


<span class="c1"># This belongs in place where it runs once per project</span>
<span class="n">db</span><span class="o">.</span><span class="n">init_app</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Model-Definition">
<a class="anchor" href="#Model-Definition" aria-hidden="true"><span class="octicon octicon-link"></span></a>Model Definition<a class="anchor-link" href="#Model-Definition"> </a>
</h2>
<blockquote>
<p>Define columns, initialization, and CRUD methods for users table in sqlite.db</p>
</blockquote>
<ul>
<li>Comment on these items in the class, purpose and definition.<ul>
<li>class User:define the properties of the user including name, dob, password, etc.    - db.Model inheritance: he ability to create a new model class that inherits from an existing model class, thereby inheriting all of its fields and methods</li>
<li>
<em>init</em> method: constructor of the user objects</li>
<li>
<code>@property</code>, <code>@&lt;column&gt;.setter</code>: these are the getter and setter methods respectively</li>
<li>create, read, update, delete methods: these methods allow you to manipulate and access the data in the sqlite.db. Read allows you to view the data, create builds the data into the table, and update and delete do as the name states.</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="sd">""" database dependencies to support sqlite examples """</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="kn">from</span> <span class="nn">sqlalchemy.exc</span> <span class="kn">import</span> <span class="n">IntegrityError</span>
<span class="kn">from</span> <span class="nn">werkzeug.security</span> <span class="kn">import</span> <span class="n">generate_password_hash</span><span class="p">,</span> <span class="n">check_password_hash</span>


<span class="sd">''' Tutorial: https://www.sqlalchemy.org/library.html#tutorials, try to get into a Python shell and follow along '''</span>

<span class="c1"># Define the User class to manage actions in the 'users' table</span>
<span class="c1"># -- Object Relational Mapping (ORM) is the key concept of SQLAlchemy</span>
<span class="c1"># -- a.) db.Model is like an inner layer of the onion in ORM</span>
<span class="c1"># -- b.) User represents data we want to store, something that is built on db.Model</span>
<span class="c1"># -- c.) SQLAlchemy ORM is layer on top of SQLAlchemy Core, then SQLAlchemy engine, SQL</span>
<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">'users'</span>  <span class="c1"># table name is plural, class name is singular</span>

    <span class="c1"># Define the User schema with "vars" from object</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_uid</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_password</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_dob</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Date</span><span class="p">)</span>

    <span class="c1"># constructor of a User object, initializes the instance variables within object (self)</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">"123qwerty"</span><span class="p">,</span> <span class="n">dob</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>    <span class="c1"># variables with self prefix become part of the object, </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_uid</span> <span class="o">=</span> <span class="n">uid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_password</span><span class="p">(</span><span class="n">password</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dob</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>  <span class="c1"># not a date type     </span>
            <span class="n">dob</span> <span class="o">=</span> <span class="n">date</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dob</span> <span class="o">=</span> <span class="n">dob</span>

    <span class="c1"># a name getter method, extracts name from object</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
    
    <span class="c1"># a setter function, allows name to be updated after initial object creation</span>
    <span class="nd">@name</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
    
    <span class="c1"># a getter method, extracts uid from object</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">uid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_uid</span>
    
    <span class="c1"># a setter function, allows uid to be updated after initial object creation</span>
    <span class="nd">@uid</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">uid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uid</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_uid</span> <span class="o">=</span> <span class="n">uid</span>
        
    <span class="c1"># check if uid parameter matches user id in object, return boolean</span>
    <span class="k">def</span> <span class="nf">is_uid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uid</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_uid</span> <span class="o">==</span> <span class="n">uid</span>
    
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">password</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_password</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span> <span class="o">+</span> <span class="s2">"..."</span> <span class="c1"># because of security only show 1st characters</span>

    <span class="c1"># update password, this is conventional method used for setter</span>
    <span class="k">def</span> <span class="nf">set_password</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
        <span class="sd">"""Create a hashed password."""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_password</span> <span class="o">=</span> <span class="n">generate_password_hash</span><span class="p">(</span><span class="n">password</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">'sha256'</span><span class="p">)</span>

    <span class="c1"># check password parameter against stored/encrypted password</span>
    <span class="k">def</span> <span class="nf">is_password</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
        <span class="sd">"""Check against hashed password."""</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">check_password_hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_password</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
    
    <span class="c1"># dob property is returned as string, a string represents date outside object</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dob</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dob_string</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dob</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'%m-</span><span class="si">%d</span><span class="s1">-%Y'</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">dob_string</span>
    
    <span class="c1"># dob setter, verifies date type before it is set or default to today</span>
    <span class="nd">@dob</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">dob</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dob</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dob</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>  <span class="c1"># not a date type     </span>
            <span class="n">dob</span> <span class="o">=</span> <span class="n">date</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dob</span> <span class="o">=</span> <span class="n">dob</span>
    
    <span class="c1"># age is calculated field, age is returned according to date of birth</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">age</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">today</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">today</span><span class="o">.</span><span class="n">year</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dob</span><span class="o">.</span><span class="n">year</span> <span class="o">-</span> <span class="p">((</span><span class="n">today</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">day</span><span class="p">)</span> <span class="o">&lt;</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dob</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dob</span><span class="o">.</span><span class="n">day</span><span class="p">))</span>
    
    <span class="c1"># output content using str(object) is in human readable form</span>
    <span class="c1"># output content using json dumps, this is ready for API response</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

    <span class="c1"># CRUD create/add a new record to the table</span>
    <span class="c1"># returns self or None on error</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># creates a person object from User(db.Model) class, passes initializers</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># add prepares to persist person object to Users table</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>  <span class="c1"># SqlAlchemy "unit of work pattern" requires a manual commit</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">:</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># CRUD read converts self to dictionary</span>
    <span class="c1"># returns dictionary</span>
    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">"id"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">"uid"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">uid</span><span class="p">,</span>
            <span class="s2">"dob"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dob</span><span class="p">,</span>
            <span class="s2">"age"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">age</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="c1"># CRUD update: updates user name, password, phone</span>
    <span class="c1"># returns self</span>
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">uid</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">""</span><span class="p">):</span>
        <span class="sd">"""only updates values with length"""</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uid</span> <span class="o">=</span> <span class="n">uid</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">password</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_password</span><span class="p">(</span><span class="n">password</span><span class="p">)</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="c1"># performs update when id exists\n",</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="c1"># CRUD delete: remove self</span>
    <span class="c1"># None</span>
    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">None</span>
    
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="My-own-Database-Model:-Cars">
<a class="anchor" href="#My-own-Database-Model:-Cars" aria-hidden="true"><span class="octicon octicon-link"></span></a>My own Database Model: Cars<a class="anchor-link" href="#My-own-Database-Model:-Cars"> </a>
</h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">Car</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">'cars'</span>  <span class="c1"># table name is plural, class name is singular</span>

    <span class="c1"># Define the User schema with "vars" from object</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">_uid</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_brand</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_color</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_powersource</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_type</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
   

    <span class="c1"># constructor of a User object, initializes the instance variables within object (self)</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">brand</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">powersource</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_brand</span> <span class="o">=</span> <span class="n">brand</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_color</span> <span class="o">=</span> <span class="n">color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_powersource</span> <span class="o">=</span> <span class="n">powersource</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="nb">type</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">_uid</span> <span class="o">=</span> <span class="n">uid</span>
    
    <span class="c1"># a getter method, extracts uid from object</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">uid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_uid</span>
    
    <span class="c1"># a setter function, allows uid to be updated after initial object creation</span>
    <span class="nd">@uid</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">uid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uid</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_uid</span> <span class="o">=</span> <span class="n">uid</span>
        
    <span class="c1"># gets the brand the car</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">brand</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_brand</span>
    
    <span class="c1"># a setter function, allows brand to be updated after initial object creation</span>
    <span class="nd">@brand</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">brand</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">brand</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_brand</span> <span class="o">=</span> <span class="n">brand</span>

     <span class="c1"># gets the color of the car</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">color</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_color</span>
    
    <span class="c1"># a setter function, allows color to be updated after initial object creation</span>
    <span class="nd">@color</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_color</span> <span class="o">=</span> <span class="n">color</span>

    <span class="c1"># gets the type of the manufacturer or the car</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span>
    
    <span class="c1"># a setter function, allows type to be updated after initial object creation</span>
    <span class="nd">@type</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="nb">type</span>
    
    <span class="c1"># a powersource getter</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">powersource</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_powersource</span>

    <span class="c1"># a setter function to set the car's powersource</span>
    <span class="nd">@powersource</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">powersource</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">powersource</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_powersource</span> <span class="o">=</span> <span class="n">powersource</span>
    
            
    <span class="c1"># output content using str(object) in human readable form, uses getter</span>
    <span class="c1"># output content using json dumps, this is ready for API response</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

    <span class="c1"># CRUD create/add a new record to the table</span>
    <span class="c1"># returns self or None on error</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># creates a person object from User(db.Model) class, passes initializers</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># add prepares to persist person object to Users table</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>  <span class="c1"># SqlAlchemy "unit of work pattern" requires a manual commit</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">:</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># CRUD read converts self to dictionary</span>
    <span class="c1"># returns dictionary</span>
    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">"id"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s2">"brand"</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">brand</span><span class="p">,</span>
            <span class="s2">"color"</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">,</span>
            <span class="s2">"powersource"</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">powersource</span><span class="p">,</span>
            <span class="s2">"type"</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
            <span class="s2">"uid"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">uid</span>
        <span class="p">}</span>
     
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">uid</span><span class="o">=</span><span class="s2">""</span><span class="p">):</span>
        <span class="sd">"""only updates values with length"""</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">brand</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">brand</span> <span class="o">=</span> <span class="n">brand</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">color</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">color</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">powersource</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">powersource</span> <span class="o">=</span> <span class="n">powersource</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">type</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">type</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uid</span> <span class="o">=</span> <span class="n">uid</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="c1"># performs update when id exists\n",</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">None</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Initial-Data">
<a class="anchor" href="#Initial-Data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Initial Data<a class="anchor-link" href="#Initial-Data"> </a>
</h2>
<ul>
<li>Comment on how these work?<ol>
<li>Create All Tables from db Object: <ul>
<li>Uses SQLALchemy db.create_all() to initialize rows into sqlite.db </li>
</ul>
</li>
<li>User Object Constructors: <ul>
<li>uses getter and setter methods to initialize user objects.</li>
</ul>
</li>
<li>Try / Except : <ul>
<li>this feature is cleaning out bad or replicated data. It ensures that there will be no user with the same id.</li>
</ul>
</li>
</ol>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="My-database-data-initializer">
<a class="anchor" href="#My-database-data-initializer" aria-hidden="true"><span class="octicon octicon-link"></span></a>My database data initializer<a class="anchor-link" href="#My-database-data-initializer"> </a>
</h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">initCars</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="sd">"""Create database and tables"""</span>
        <span class="n">db</span><span class="o">.</span><span class="n">create_all</span><span class="p">()</span>

        <span class="sd">"""Tester data for table"""</span>
        <span class="n">c1</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'1'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Acura'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'gray'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'ice'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'suv'</span><span class="p">)</span>
        <span class="n">c2</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'2'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Hyundai'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'red'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'ice'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'sedan'</span><span class="p">)</span> 
        <span class="n">c3</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'3'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Mazda'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'white'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'ice'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'sedan'</span><span class="p">)</span>
        <span class="n">c4</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'4'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Honda'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'gray'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'ice'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'suv'</span><span class="p">)</span>
        <span class="n">c5</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'5'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Dodge'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'black'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'ice'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'suv'</span><span class="p">)</span>
        <span class="n">c6</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'6'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Toyota'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'white'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'ice'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'truck'</span><span class="p">)</span> 
        <span class="n">c7</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'7'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Hyundai'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'blue'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'ice'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'sedan'</span><span class="p">)</span>
        <span class="n">c8</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'8'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Chevrolet'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'gray'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'ice'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'truck'</span><span class="p">)</span>
        <span class="n">c9</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'9'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Jeep'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'gray'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'ice'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'suv'</span><span class="p">)</span>
        <span class="n">c10</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'10'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Nissan'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'silver'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'ice'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'sedan'</span><span class="p">)</span> 
        <span class="n">c11</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'11'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Lexus'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'black'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'ice'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'sedan'</span><span class="p">)</span>
        <span class="n">c12</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'12'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Kia'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'red'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'ice'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'suv'</span><span class="p">)</span>
        <span class="n">c13</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'13'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Mazda'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'red'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'ice'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'truck'</span><span class="p">)</span>
        <span class="n">c14</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'14'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Ford'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'white'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'ice'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'sedan'</span><span class="p">)</span> 
        <span class="n">c15</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'15'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Kia'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'red'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'ice'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'truck'</span><span class="p">)</span>
        <span class="n">c16</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'16'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Ford'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'gray'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'ice'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'suv'</span><span class="p">)</span>
        <span class="n">c17</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'17'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Jeep'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'red'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'ice'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'truck'</span><span class="p">)</span>
        <span class="n">c18</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'18'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Toyota'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'red'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'electric'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'suv'</span><span class="p">)</span> 
        <span class="n">c19</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'19'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Kia'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'silver'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'ice'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'truck'</span><span class="p">)</span>
        <span class="n">c20</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'20'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Honda'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'white'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'ice'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'suv'</span><span class="p">)</span>
        <span class="n">c21</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'21'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Hyundai'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'white'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'ice'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'sedan'</span><span class="p">)</span>
        <span class="n">c22</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'22'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Chevrolet'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'white'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'ice'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'suv'</span><span class="p">)</span> 
        <span class="n">c23</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'23'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Jeep'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'white'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'ice'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'suv'</span><span class="p">)</span>
        <span class="n">c24</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'24'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'BMW'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'gray'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'ice'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'sedan'</span><span class="p">)</span>
        <span class="n">c25</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'25'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Ferrari'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'yellow'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'ice'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'sports'</span><span class="p">)</span>
        <span class="n">c26</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'26'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Tesla'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'red'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'electric'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'suv'</span><span class="p">)</span> 
        <span class="n">c27</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'27'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Tesla'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'blue'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'electric'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'suv'</span><span class="p">)</span>
        <span class="n">c28</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'28'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Ford'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'white'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'electric'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'truck'</span><span class="p">)</span>
        <span class="n">c29</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'29'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Ford'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'blue'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'electric'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'truck'</span><span class="p">)</span>
        <span class="n">c30</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'30'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Audi'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'black'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'electric'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'suv'</span><span class="p">)</span> 
        <span class="n">c31</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'31'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Ferrari'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'red'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'electric'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'sports'</span><span class="p">)</span>
        <span class="n">c32</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'32'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Mercedes'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'silver'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'electric'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'sedan'</span><span class="p">)</span>
        <span class="n">c33</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'33'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Mazda'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'silver'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'electric'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'suv'</span><span class="p">)</span>
        <span class="n">c34</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'34'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Nissan'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'blue'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'electric'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'suv'</span><span class="p">)</span> 
        <span class="n">c35</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="s1">'35'</span><span class="p">,</span> <span class="n">brand</span><span class="o">=</span><span class="s1">'Subaru'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'red'</span><span class="p">,</span> <span class="n">powersource</span><span class="o">=</span><span class="s1">'electric'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'suv'</span><span class="p">)</span>

        <span class="n">cars</span> <span class="o">=</span> <span class="p">[</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="n">c3</span><span class="p">,</span> <span class="n">c4</span><span class="p">,</span> <span class="n">c5</span><span class="p">,</span> <span class="n">c6</span><span class="p">,</span> <span class="n">c7</span><span class="p">,</span> <span class="n">c8</span><span class="p">,</span> <span class="n">c9</span><span class="p">,</span> <span class="n">c10</span><span class="p">,</span> <span class="n">c11</span><span class="p">,</span> <span class="n">c12</span><span class="p">,</span> <span class="n">c13</span><span class="p">,</span> <span class="n">c14</span><span class="p">,</span> <span class="n">c15</span><span class="p">,</span> <span class="n">c16</span><span class="p">,</span> <span class="n">c17</span><span class="p">,</span> <span class="n">c18</span><span class="p">,</span> <span class="n">c19</span><span class="p">,</span> <span class="n">c20</span><span class="p">,</span> <span class="n">c21</span><span class="p">,</span> <span class="n">c22</span><span class="p">,</span> <span class="n">c23</span><span class="p">,</span> <span class="n">c24</span><span class="p">,</span> <span class="n">c25</span><span class="p">,</span> <span class="n">c26</span><span class="p">,</span> <span class="n">c27</span><span class="p">,</span> <span class="n">c28</span><span class="p">,</span> <span class="n">c29</span><span class="p">,</span> <span class="n">c30</span><span class="p">,</span> <span class="n">c31</span><span class="p">,</span> <span class="n">c32</span><span class="p">,</span> <span class="n">c33</span><span class="p">,</span> <span class="n">c34</span><span class="p">,</span> <span class="n">c35</span><span class="p">]</span>

        <span class="c1">#try:</span>
        <span class="c1">#    db.session.query(Car).delete()</span>
        <span class="c1">#    db.session.commit()</span>
        <span class="c1">#except:</span>
        <span class="c1">#    db.session.rollback()</span>

        <span class="sd">"""Builds sample car/note(s) data"""</span>
        <span class="k">for</span> <span class="n">car</span> <span class="ow">in</span> <span class="n">cars</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">object</span> <span class="o">=</span> <span class="n">car</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Created new uid </span><span class="si">{</span><span class="nb">object</span><span class="o">.</span><span class="n">uid</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
                
            <span class="k">except</span><span class="p">:</span>  <span class="c1"># error raised if object nit created</span>
                <span class="sd">'''fails with bad or duplicate data'''</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Records exist uid </span><span class="si">{</span><span class="n">car</span><span class="o">.</span><span class="n">uid</span><span class="si">}</span><span class="s2">, or error."</span><span class="p">)</span>
<span class="n">initCars</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="sd">"""Database Creation and Testing """</span>

<span class="c1"># Builds working data for testing</span>
<span class="k">def</span> <span class="nf">initUsers</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="sd">"""Create database and tables"""</span>
        <span class="n">db</span><span class="o">.</span><span class="n">create_all</span><span class="p">()</span>
        <span class="sd">"""Tester data for table"""</span>
        <span class="n">u1</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'Thomas Edison'</span><span class="p">,</span> <span class="n">uid</span><span class="o">=</span><span class="s1">'toby'</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">'123toby'</span><span class="p">,</span> <span class="n">dob</span><span class="o">=</span><span class="n">datetime</span><span class="p">(</span><span class="mi">1847</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">11</span><span class="p">))</span>
        <span class="n">u2</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'Nikola Tesla'</span><span class="p">,</span> <span class="n">uid</span><span class="o">=</span><span class="s1">'niko'</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">'123niko'</span><span class="p">)</span>
        <span class="n">u3</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'Alexander Graham Bell'</span><span class="p">,</span> <span class="n">uid</span><span class="o">=</span><span class="s1">'lex'</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">'123lex'</span><span class="p">)</span>
        <span class="n">u4</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'Eli Whitney'</span><span class="p">,</span> <span class="n">uid</span><span class="o">=</span><span class="s1">'whit'</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">'123whit'</span><span class="p">)</span>
        <span class="n">u5</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'Indiana Jones'</span><span class="p">,</span> <span class="n">uid</span><span class="o">=</span><span class="s1">'indi'</span><span class="p">,</span> <span class="n">dob</span><span class="o">=</span><span class="n">datetime</span><span class="p">(</span><span class="mi">1920</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">21</span><span class="p">))</span>
        <span class="n">u6</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'Marion Ravenwood'</span><span class="p">,</span> <span class="n">uid</span><span class="o">=</span><span class="s1">'raven'</span><span class="p">,</span> <span class="n">dob</span><span class="o">=</span><span class="n">datetime</span><span class="p">(</span><span class="mi">1921</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">21</span><span class="p">))</span>


        <span class="n">users</span> <span class="o">=</span> <span class="p">[</span><span class="n">u1</span><span class="p">,</span> <span class="n">u2</span><span class="p">,</span> <span class="n">u3</span><span class="p">,</span> <span class="n">u4</span><span class="p">,</span> <span class="n">u5</span><span class="p">,</span> <span class="n">u6</span><span class="p">]</span>

        <span class="sd">"""Builds sample user/note(s) data"""</span>
        <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="sd">'''add user to table'''</span>
                <span class="nb">object</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Created new uid </span><span class="si">{</span><span class="nb">object</span><span class="o">.</span><span class="n">uid</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>  <span class="c1"># error raised if object nit created</span>
                <span class="sd">'''fails with bad or duplicate data'''</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Records exist uid </span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">uid</span><span class="si">}</span><span class="s2">, or error."</span><span class="p">)</span>
                
<span class="n">initUsers</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Check-for-given-Credentials-in-users-table-in-sqlite.db">
<a class="anchor" href="#Check-for-given-Credentials-in-users-table-in-sqlite.db" aria-hidden="true"><span class="octicon octicon-link"></span></a>Check for given Credentials in users table in sqlite.db<a class="anchor-link" href="#Check-for-given-Credentials-in-users-table-in-sqlite.db"> </a>
</h2>
<blockquote>
<p>Use of ORM Query object and custom methods to identify user to credentials uid and password</p>
</blockquote>
<ul>
<li>Comment on purpose of following<ol>
<li>User.query.filter_by:- this filters the database by uid and identifies the user whose uid matches the input    2. user.password: <ul>
<li>once the uid is received, the function check-credentials compares that inputted password to the password of the user with the inputted uid. In essence, this is like a security feature. </li>
</ul>
</li>
</ol>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">find_by_uid</span><span class="p">(</span><span class="n">uid</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">_uid</span><span class="o">=</span><span class="n">uid</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">user</span> <span class="c1"># returns user object</span>

<span class="k">def</span> <span class="nf">find_by_caruid</span><span class="p">(</span><span class="n">uid</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="n">car</span> <span class="o">=</span> <span class="n">Car</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">_uid</span><span class="o">=</span><span class="n">uid</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">car</span> <span class="c1"># returns user object</span>

<span class="c1"># Check credentials by finding user and verify password</span>
<span class="k">def</span> <span class="nf">check_credentials</span><span class="p">(</span><span class="n">uid</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
    <span class="c1"># query email and return user record</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">find_by_uid</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">user</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">is_password</span><span class="p">(</span><span class="n">password</span><span class="p">)):</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>

<span class="c1">#check_credentials("indi", "123qwerty")</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Create-a-new-User-in-table-in-Sqlite.db">
<a class="anchor" href="#Create-a-new-User-in-table-in-Sqlite.db" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create a new User in table in Sqlite.db<a class="anchor-link" href="#Create-a-new-User-in-table-in-Sqlite.db"> </a>
</h2>
<blockquote>
<p>Uses SQLALchemy and custom user.create() method to add row.</p>
</blockquote>
<ul>
<li>Comment on purpose of following<ol>
<li>user.find_by_uid() and try/except:- the find_by_uid() filters the database by uid and identifies the user whose uid matches the input. it then returns that user.        - the try/except feature is cleaning out bad or replicated data. It ensures that there will be no user with the same id.</li>
<li>user = User(...)<ul>
<li>this initializes the user objects before date of birth</li>
</ul>
</li>
<li>user.dob and try/except:  <ul>
<li>user.dob is a placeholder for the birth date of the user. It ensures that users write their date of birth in the right format otherwise an exception occurs and the date of birth is set to the default.</li>
<li>the try/except feature is cleaning out bad or replicated data. It ensures that there will be no user with the same id.</li>
</ul>
</li>
<li>user.create() and try/except:  <ul>
<li>user.create() creates a new user to add the the sqlite table based off of the input it receives from the user.</li>
<li>the try/except feature is cleaning out bad or replicated data. It ensures that there will be no user with the same id.</li>
</ul>
</li>
</ol>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">create</span><span class="p">():</span>
    <span class="c1"># optimize user time to see if uid exists</span>
    <span class="n">uid</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter your user id:"</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">find_by_uid</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Found</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="n">user</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="k">return</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span> <span class="c1"># keep going</span>
    
    <span class="c1"># request value that ensure creating valid object</span>
    <span class="n">name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter your name:"</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter your password"</span><span class="p">)</span>
    
    <span class="c1"># Initialize User object before date</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> 
                <span class="n">uid</span><span class="o">=</span><span class="n">uid</span><span class="p">,</span> 
                <span class="n">password</span><span class="o">=</span><span class="n">password</span>
                <span class="p">)</span>
    
    <span class="c1"># create user.dob, fail with today as dob</span>
    <span class="n">dob</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter your date of birth 'YYYY-MM-DD'"</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">user</span><span class="o">.</span><span class="n">dob</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">dob</span><span class="p">,</span> <span class="s1">'%Y-%m-</span><span class="si">%d</span><span class="s1">'</span><span class="p">)</span><span class="o">.</span><span class="n">date</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="n">user</span><span class="o">.</span><span class="n">dob</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Invalid date </span><span class="si">{</span><span class="n">dob</span><span class="si">}</span><span class="s2"> require YYYY-mm-dd, date defaulted to </span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">dob</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
           
    <span class="c1"># write object to database</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">object</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Created</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="nb">object</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="k">except</span><span class="p">:</span>  <span class="c1"># error raised if object not created</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Unknown error uid </span><span class="si">{uid}</span><span class="s2">"</span><span class="p">)</span>
        
<span class="n">create</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Create-and-Read-for-Car-database-(my-database)">
<a class="anchor" href="#Create-and-Read-for-Car-database-(my-database)" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create and Read for Car database (my database)<a class="anchor-link" href="#Create-and-Read-for-Car-database-(my-database)"> </a>
</h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">createCar</span><span class="p">():</span>
    <span class="n">uid</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter your car id:"</span><span class="p">)</span>
    <span class="n">car</span> <span class="o">=</span> <span class="n">find_by_caruid</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Found</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="n">car</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="k">return</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span> <span class="c1"># keep going</span>

    <span class="c1"># request value that ensure creating valid object</span>
    <span class="n">brand</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"What brand is the car?"</span><span class="p">)</span>
    <span class="n">color</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"What color is the car?"</span><span class="p">)</span>
    <span class="n">powersource</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"What is the car's powersource?"</span><span class="p">)</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"What type of car is it?"</span><span class="p">)</span> 
    
    <span class="c1"># Initialize User object before date</span>
    <span class="n">car</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">brand</span><span class="o">=</span><span class="n">brand</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> 
                <span class="n">powersource</span><span class="o">=</span><span class="n">powersource</span><span class="p">,</span>
                <span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span>
                <span class="n">uid</span><span class="o">=</span><span class="n">uid</span>
                <span class="p">)</span>
       
    <span class="c1"># write object to database</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">object</span> <span class="o">=</span> <span class="n">car</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Created</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="nb">object</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="k">except</span><span class="p">:</span>  <span class="c1"># error raised if object not created</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Unknown error powersource </span><span class="si">{uid}</span><span class="s2">"</span><span class="p">)</span>
        
<span class="n">createCar</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">OperationalError</span>                          Traceback (most recent call last)
File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/engine/base.py:3280</span>, in <span class="ansi-cyan-fg">Engine._wrap_pool_connect</span><span class="ansi-blue-fg">(self, fn, connection)</span>
<span class="ansi-green-intense-fg ansi-bold">   3279</span> try:
<span class="ansi-green-fg">-&gt; 3280</span>     return fn()
<span class="ansi-green-intense-fg ansi-bold">   3281</span> except dialect.dbapi.Error as e:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/pool/base.py:310</span>, in <span class="ansi-cyan-fg">Pool.connect</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    303</span> """Return a DBAPI connection from the pool.
<span class="ansi-green-intense-fg ansi-bold">    304</span> 
<span class="ansi-green-intense-fg ansi-bold">    305</span> The connection is instrumented such that when its
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">    308</span> 
<span class="ansi-green-intense-fg ansi-bold">    309</span> """
<span class="ansi-green-fg">--&gt; 310</span> return _ConnectionFairy._checkout(self)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/pool/base.py:868</span>, in <span class="ansi-cyan-fg">_ConnectionFairy._checkout</span><span class="ansi-blue-fg">(cls, pool, threadconns, fairy)</span>
<span class="ansi-green-intense-fg ansi-bold">    867</span> if not fairy:
<span class="ansi-green-fg">--&gt; 868</span>     fairy = _ConnectionRecord.checkout(pool)
<span class="ansi-green-intense-fg ansi-bold">    870</span>     fairy._pool = pool

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/pool/base.py:476</span>, in <span class="ansi-cyan-fg">_ConnectionRecord.checkout</span><span class="ansi-blue-fg">(cls, pool)</span>
<span class="ansi-green-intense-fg ansi-bold">    474</span> @classmethod
<span class="ansi-green-intense-fg ansi-bold">    475</span> def checkout(cls, pool):
<span class="ansi-green-fg">--&gt; 476</span>     rec = pool._do_get()
<span class="ansi-green-intense-fg ansi-bold">    477</span>     try:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/pool/impl.py:256</span>, in <span class="ansi-cyan-fg">NullPool._do_get</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    255</span> def _do_get(self):
<span class="ansi-green-fg">--&gt; 256</span>     return self._create_connection()

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/pool/base.py:256</span>, in <span class="ansi-cyan-fg">Pool._create_connection</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    254</span> """Called by subclasses to create a new ConnectionRecord."""
<span class="ansi-green-fg">--&gt; 256</span> return _ConnectionRecord(self)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/pool/base.py:371</span>, in <span class="ansi-cyan-fg">_ConnectionRecord.__init__</span><span class="ansi-blue-fg">(self, pool, connect)</span>
<span class="ansi-green-intense-fg ansi-bold">    370</span> if connect:
<span class="ansi-green-fg">--&gt; 371</span>     self.__connect()
<span class="ansi-green-intense-fg ansi-bold">    372</span> self.finalize_callback = deque()

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/pool/base.py:665</span>, in <span class="ansi-cyan-fg">_ConnectionRecord.__connect</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    664</span> except Exception as e:
<span class="ansi-green-fg">--&gt; 665</span>     with util.safe_reraise():
<span class="ansi-green-intense-fg ansi-bold">    666</span>         pool.logger.debug("Error on connect(): %s", e)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py:70</span>, in <span class="ansi-cyan-fg">safe_reraise.__exit__</span><span class="ansi-blue-fg">(self, type_, value, traceback)</span>
<span class="ansi-green-intense-fg ansi-bold">     69</span>     if not self.warn_only:
<span class="ansi-green-fg">---&gt; 70</span>         compat.raise_(
<span class="ansi-green-intense-fg ansi-bold">     71</span>             exc_value,
<span class="ansi-green-intense-fg ansi-bold">     72</span>             with_traceback=exc_tb,
<span class="ansi-green-intense-fg ansi-bold">     73</span>         )
<span class="ansi-green-intense-fg ansi-bold">     74</span> else:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/util/compat.py:208</span>, in <span class="ansi-cyan-fg">raise_</span><span class="ansi-blue-fg">(***failed resolving arguments***)</span>
<span class="ansi-green-intense-fg ansi-bold">    207</span> try:
<span class="ansi-green-fg">--&gt; 208</span>     raise exception
<span class="ansi-green-intense-fg ansi-bold">    209</span> finally:
<span class="ansi-green-intense-fg ansi-bold">    210</span>     # credit to
<span class="ansi-green-intense-fg ansi-bold">    211</span>     # https://cosmicpercolator.com/2016/01/13/exception-leaks-in-python-2-and-3/
<span class="ansi-green-intense-fg ansi-bold">    212</span>     # as the __traceback__ object creates a cycle

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/pool/base.py:661</span>, in <span class="ansi-cyan-fg">_ConnectionRecord.__connect</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    660</span> self.starttime = time.time()
<span class="ansi-green-fg">--&gt; 661</span> self.dbapi_connection = connection = pool._invoke_creator(self)
<span class="ansi-green-intense-fg ansi-bold">    662</span> pool.logger.debug("Created new connection %r", connection)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/engine/create.py:590</span>, in <span class="ansi-cyan-fg">create_engine.&lt;locals&gt;.connect</span><span class="ansi-blue-fg">(connection_record)</span>
<span class="ansi-green-intense-fg ansi-bold">    589</span>             return connection
<span class="ansi-green-fg">--&gt; 590</span> return dialect.connect(*cargs, **cparams)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/engine/default.py:597</span>, in <span class="ansi-cyan-fg">DefaultDialect.connect</span><span class="ansi-blue-fg">(self, *cargs, **cparams)</span>
<span class="ansi-green-intense-fg ansi-bold">    595</span> def connect(self, *cargs, **cparams):
<span class="ansi-green-intense-fg ansi-bold">    596</span>     # inherits the docstring from interfaces.Dialect.connect
<span class="ansi-green-fg">--&gt; 597</span>     return self.dbapi.connect(*cargs, **cparams)

<span class="ansi-red-fg">OperationalError</span>: unable to open database file

The above exception was the direct cause of the following exception:

<span class="ansi-red-fg">OperationalError</span>                          Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[12], line 32</span>
<span class="ansi-green-intense-fg ansi-bold">     29</span>         except:  # error raised if object not created
<span class="ansi-green-intense-fg ansi-bold">     30</span>             print("Unknown error powersource {uid}")
<span class="ansi-green-fg">---&gt; 32</span> createCar()

Cell <span class="ansi-green-fg">In[12], line 3</span>, in <span class="ansi-cyan-fg">createCar</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> def createCar():
<span class="ansi-green-intense-fg ansi-bold">      2</span>     uid = input("Enter your car id:")
<span class="ansi-green-fg">----&gt; 3</span>     car = find_by_caruid(uid)
<span class="ansi-green-intense-fg ansi-bold">      4</span>     try:
<span class="ansi-green-intense-fg ansi-bold">      5</span>         print("Found\n", car.read())

Cell <span class="ansi-green-fg">In[9], line 9</span>, in <span class="ansi-cyan-fg">find_by_caruid</span><span class="ansi-blue-fg">(uid)</span>
<span class="ansi-green-intense-fg ansi-bold">      7</span> def find_by_caruid(uid):
<span class="ansi-green-intense-fg ansi-bold">      8</span>     with app.app_context():
<span class="ansi-green-fg">----&gt; 9</span>         car = Car.query.filter_by(_uid=uid).first()
<span class="ansi-green-intense-fg ansi-bold">     10</span>     return car

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/orm/query.py:2819</span>, in <span class="ansi-cyan-fg">Query.first</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">   2817</span>     return self._iter().first()
<span class="ansi-green-intense-fg ansi-bold">   2818</span> else:
<span class="ansi-green-fg">-&gt; 2819</span>     return self.limit(1)._iter().first()

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/orm/query.py:2903</span>, in <span class="ansi-cyan-fg">Query._iter</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">   2900</span> params = self._params
<span class="ansi-green-intense-fg ansi-bold">   2902</span> statement = self._statement_20()
<span class="ansi-green-fg">-&gt; 2903</span> result = self.session.execute(
<span class="ansi-green-intense-fg ansi-bold">   2904</span>     statement,
<span class="ansi-green-intense-fg ansi-bold">   2905</span>     params,
<span class="ansi-green-intense-fg ansi-bold">   2906</span>     execution_options={"_sa_orm_load_options": self.load_options},
<span class="ansi-green-intense-fg ansi-bold">   2907</span> )
<span class="ansi-green-intense-fg ansi-bold">   2909</span> # legacy: automatically set scalars, unique
<span class="ansi-green-intense-fg ansi-bold">   2910</span> if result._attributes.get("is_single_entity", False):

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/orm/session.py:1711</span>, in <span class="ansi-cyan-fg">Session.execute</span><span class="ansi-blue-fg">(self, statement, params, execution_options, bind_arguments, _parent_execute_state, _add_event, **kw)</span>
<span class="ansi-green-intense-fg ansi-bold">   1707</span>     execution_options = execution_options.union(
<span class="ansi-green-intense-fg ansi-bold">   1708</span>         dict(future_result=False)
<span class="ansi-green-intense-fg ansi-bold">   1709</span>     )
<span class="ansi-green-intense-fg ansi-bold">   1710</span> else:
<span class="ansi-green-fg">-&gt; 1711</span>     conn = self._connection_for_bind(bind)
<span class="ansi-green-intense-fg ansi-bold">   1712</span> result = conn._execute_20(statement, params or {}, execution_options)
<span class="ansi-green-intense-fg ansi-bold">   1714</span> if compile_state_cls:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/orm/session.py:1552</span>, in <span class="ansi-cyan-fg">Session._connection_for_bind</span><span class="ansi-blue-fg">(self, engine, execution_options, **kw)</span>
<span class="ansi-green-intense-fg ansi-bold">   1549</span> TransactionalContext._trans_ctx_check(self)
<span class="ansi-green-intense-fg ansi-bold">   1551</span> if self._transaction is not None or self._autobegin():
<span class="ansi-green-fg">-&gt; 1552</span>     return self._transaction._connection_for_bind(
<span class="ansi-green-intense-fg ansi-bold">   1553</span>         engine, execution_options
<span class="ansi-green-intense-fg ansi-bold">   1554</span>     )
<span class="ansi-green-intense-fg ansi-bold">   1556</span> assert self._transaction is None
<span class="ansi-green-intense-fg ansi-bold">   1557</span> assert self.autocommit

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/orm/session.py:747</span>, in <span class="ansi-cyan-fg">SessionTransaction._connection_for_bind</span><span class="ansi-blue-fg">(self, bind, execution_options)</span>
<span class="ansi-green-intense-fg ansi-bold">    742</span>             raise sa_exc.InvalidRequestError(
<span class="ansi-green-intense-fg ansi-bold">    743</span>                 "Session already has a Connection associated for the "
<span class="ansi-green-intense-fg ansi-bold">    744</span>                 "given Connection's Engine"
<span class="ansi-green-intense-fg ansi-bold">    745</span>             )
<span class="ansi-green-intense-fg ansi-bold">    746</span>     else:
<span class="ansi-green-fg">--&gt; 747</span>         conn = bind.connect()
<span class="ansi-green-intense-fg ansi-bold">    748</span>         local_connect = True
<span class="ansi-green-intense-fg ansi-bold">    750</span> try:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/engine/base.py:3234</span>, in <span class="ansi-cyan-fg">Engine.connect</span><span class="ansi-blue-fg">(self, close_with_result)</span>
<span class="ansi-green-intense-fg ansi-bold">   3219</span> def connect(self, close_with_result=False):
<span class="ansi-green-intense-fg ansi-bold">   3220</span>     """Return a new :class:`_engine.Connection` object.
<span class="ansi-green-intense-fg ansi-bold">   3221</span> 
<span class="ansi-green-intense-fg ansi-bold">   3222</span>     The :class:`_engine.Connection` object is a facade that uses a DBAPI
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">   3231</span> 
<span class="ansi-green-intense-fg ansi-bold">   3232</span>     """
<span class="ansi-green-fg">-&gt; 3234</span>     return self._connection_cls(self, close_with_result=close_with_result)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/engine/base.py:96</span>, in <span class="ansi-cyan-fg">Connection.__init__</span><span class="ansi-blue-fg">(self, engine, connection, close_with_result, _branch_from, _execution_options, _dispatch, _has_events, _allow_revalidate)</span>
<span class="ansi-green-intense-fg ansi-bold">     91</span>     self._has_events = _branch_from._has_events
<span class="ansi-green-intense-fg ansi-bold">     92</span> else:
<span class="ansi-green-intense-fg ansi-bold">     93</span>     self._dbapi_connection = (
<span class="ansi-green-intense-fg ansi-bold">     94</span>         connection
<span class="ansi-green-intense-fg ansi-bold">     95</span>         if connection is not None
<span class="ansi-green-fg">---&gt; 96</span>         else engine.raw_connection()
<span class="ansi-green-intense-fg ansi-bold">     97</span>     )
<span class="ansi-green-intense-fg ansi-bold">     99</span>     self._transaction = self._nested_transaction = None
<span class="ansi-green-intense-fg ansi-bold">    100</span>     self.__savepoint_seq = 0

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/engine/base.py:3313</span>, in <span class="ansi-cyan-fg">Engine.raw_connection</span><span class="ansi-blue-fg">(self, _connection)</span>
<span class="ansi-green-intense-fg ansi-bold">   3291</span> def raw_connection(self, _connection=None):
<span class="ansi-green-intense-fg ansi-bold">   3292</span>     """Return a "raw" DBAPI connection from the connection pool.
<span class="ansi-green-intense-fg ansi-bold">   3293</span> 
<span class="ansi-green-intense-fg ansi-bold">   3294</span>     The returned object is a proxied version of the DBAPI
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">   3311</span> 
<span class="ansi-green-intense-fg ansi-bold">   3312</span>     """
<span class="ansi-green-fg">-&gt; 3313</span>     return self._wrap_pool_connect(self.pool.connect, _connection)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/engine/base.py:3283</span>, in <span class="ansi-cyan-fg">Engine._wrap_pool_connect</span><span class="ansi-blue-fg">(self, fn, connection)</span>
<span class="ansi-green-intense-fg ansi-bold">   3281</span> except dialect.dbapi.Error as e:
<span class="ansi-green-intense-fg ansi-bold">   3282</span>     if connection is None:
<span class="ansi-green-fg">-&gt; 3283</span>         Connection._handle_dbapi_exception_noconnection(
<span class="ansi-green-intense-fg ansi-bold">   3284</span>             e, dialect, self
<span class="ansi-green-intense-fg ansi-bold">   3285</span>         )
<span class="ansi-green-intense-fg ansi-bold">   3286</span>     else:
<span class="ansi-green-intense-fg ansi-bold">   3287</span>         util.raise_(
<span class="ansi-green-intense-fg ansi-bold">   3288</span>             sys.exc_info()[1], with_traceback=sys.exc_info()[2]
<span class="ansi-green-intense-fg ansi-bold">   3289</span>         )

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/engine/base.py:2117</span>, in <span class="ansi-cyan-fg">Connection._handle_dbapi_exception_noconnection</span><span class="ansi-blue-fg">(cls, e, dialect, engine)</span>
<span class="ansi-green-intense-fg ansi-bold">   2115</span>     util.raise_(newraise, with_traceback=exc_info[2], from_=e)
<span class="ansi-green-intense-fg ansi-bold">   2116</span> elif should_wrap:
<span class="ansi-green-fg">-&gt; 2117</span>     util.raise_(
<span class="ansi-green-intense-fg ansi-bold">   2118</span>         sqlalchemy_exception, with_traceback=exc_info[2], from_=e
<span class="ansi-green-intense-fg ansi-bold">   2119</span>     )
<span class="ansi-green-intense-fg ansi-bold">   2120</span> else:
<span class="ansi-green-intense-fg ansi-bold">   2121</span>     util.raise_(exc_info[1], with_traceback=exc_info[2])

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/util/compat.py:208</span>, in <span class="ansi-cyan-fg">raise_</span><span class="ansi-blue-fg">(***failed resolving arguments***)</span>
<span class="ansi-green-intense-fg ansi-bold">    205</span>     exception.__cause__ = replace_context
<span class="ansi-green-intense-fg ansi-bold">    207</span> try:
<span class="ansi-green-fg">--&gt; 208</span>     raise exception
<span class="ansi-green-intense-fg ansi-bold">    209</span> finally:
<span class="ansi-green-intense-fg ansi-bold">    210</span>     # credit to
<span class="ansi-green-intense-fg ansi-bold">    211</span>     # https://cosmicpercolator.com/2016/01/13/exception-leaks-in-python-2-and-3/
<span class="ansi-green-intense-fg ansi-bold">    212</span>     # as the __traceback__ object creates a cycle
<span class="ansi-green-intense-fg ansi-bold">    213</span>     del exception, replace_context, from_, with_traceback

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/engine/base.py:3280</span>, in <span class="ansi-cyan-fg">Engine._wrap_pool_connect</span><span class="ansi-blue-fg">(self, fn, connection)</span>
<span class="ansi-green-intense-fg ansi-bold">   3278</span> dialect = self.dialect
<span class="ansi-green-intense-fg ansi-bold">   3279</span> try:
<span class="ansi-green-fg">-&gt; 3280</span>     return fn()
<span class="ansi-green-intense-fg ansi-bold">   3281</span> except dialect.dbapi.Error as e:
<span class="ansi-green-intense-fg ansi-bold">   3282</span>     if connection is None:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/pool/base.py:310</span>, in <span class="ansi-cyan-fg">Pool.connect</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    302</span> def connect(self):
<span class="ansi-green-intense-fg ansi-bold">    303</span>     """Return a DBAPI connection from the pool.
<span class="ansi-green-intense-fg ansi-bold">    304</span> 
<span class="ansi-green-intense-fg ansi-bold">    305</span>     The connection is instrumented such that when its
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">    308</span> 
<span class="ansi-green-intense-fg ansi-bold">    309</span>     """
<span class="ansi-green-fg">--&gt; 310</span>     return _ConnectionFairy._checkout(self)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/pool/base.py:868</span>, in <span class="ansi-cyan-fg">_ConnectionFairy._checkout</span><span class="ansi-blue-fg">(cls, pool, threadconns, fairy)</span>
<span class="ansi-green-intense-fg ansi-bold">    865</span> @classmethod
<span class="ansi-green-intense-fg ansi-bold">    866</span> def _checkout(cls, pool, threadconns=None, fairy=None):
<span class="ansi-green-intense-fg ansi-bold">    867</span>     if not fairy:
<span class="ansi-green-fg">--&gt; 868</span>         fairy = _ConnectionRecord.checkout(pool)
<span class="ansi-green-intense-fg ansi-bold">    870</span>         fairy._pool = pool
<span class="ansi-green-intense-fg ansi-bold">    871</span>         fairy._counter = 0

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/pool/base.py:476</span>, in <span class="ansi-cyan-fg">_ConnectionRecord.checkout</span><span class="ansi-blue-fg">(cls, pool)</span>
<span class="ansi-green-intense-fg ansi-bold">    474</span> @classmethod
<span class="ansi-green-intense-fg ansi-bold">    475</span> def checkout(cls, pool):
<span class="ansi-green-fg">--&gt; 476</span>     rec = pool._do_get()
<span class="ansi-green-intense-fg ansi-bold">    477</span>     try:
<span class="ansi-green-intense-fg ansi-bold">    478</span>         dbapi_connection = rec.get_connection()

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/pool/impl.py:256</span>, in <span class="ansi-cyan-fg">NullPool._do_get</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    255</span> def _do_get(self):
<span class="ansi-green-fg">--&gt; 256</span>     return self._create_connection()

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/pool/base.py:256</span>, in <span class="ansi-cyan-fg">Pool._create_connection</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    253</span> def _create_connection(self):
<span class="ansi-green-intense-fg ansi-bold">    254</span>     """Called by subclasses to create a new ConnectionRecord."""
<span class="ansi-green-fg">--&gt; 256</span>     return _ConnectionRecord(self)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/pool/base.py:371</span>, in <span class="ansi-cyan-fg">_ConnectionRecord.__init__</span><span class="ansi-blue-fg">(self, pool, connect)</span>
<span class="ansi-green-intense-fg ansi-bold">    369</span> self.__pool = pool
<span class="ansi-green-intense-fg ansi-bold">    370</span> if connect:
<span class="ansi-green-fg">--&gt; 371</span>     self.__connect()
<span class="ansi-green-intense-fg ansi-bold">    372</span> self.finalize_callback = deque()

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/pool/base.py:665</span>, in <span class="ansi-cyan-fg">_ConnectionRecord.__connect</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    663</span>     self.fresh = True
<span class="ansi-green-intense-fg ansi-bold">    664</span> except Exception as e:
<span class="ansi-green-fg">--&gt; 665</span>     with util.safe_reraise():
<span class="ansi-green-intense-fg ansi-bold">    666</span>         pool.logger.debug("Error on connect(): %s", e)
<span class="ansi-green-intense-fg ansi-bold">    667</span> else:
<span class="ansi-green-intense-fg ansi-bold">    668</span>     # in SQLAlchemy 1.4 the first_connect event is not used by
<span class="ansi-green-intense-fg ansi-bold">    669</span>     # the engine, so this will usually not be set

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py:70</span>, in <span class="ansi-cyan-fg">safe_reraise.__exit__</span><span class="ansi-blue-fg">(self, type_, value, traceback)</span>
<span class="ansi-green-intense-fg ansi-bold">     68</span>     self._exc_info = None  # remove potential circular references
<span class="ansi-green-intense-fg ansi-bold">     69</span>     if not self.warn_only:
<span class="ansi-green-fg">---&gt; 70</span>         compat.raise_(
<span class="ansi-green-intense-fg ansi-bold">     71</span>             exc_value,
<span class="ansi-green-intense-fg ansi-bold">     72</span>             with_traceback=exc_tb,
<span class="ansi-green-intense-fg ansi-bold">     73</span>         )
<span class="ansi-green-intense-fg ansi-bold">     74</span> else:
<span class="ansi-green-intense-fg ansi-bold">     75</span>     if not compat.py3k and self._exc_info and self._exc_info[1]:
<span class="ansi-green-intense-fg ansi-bold">     76</span>         # emulate Py3K's behavior of telling us when an exception
<span class="ansi-green-intense-fg ansi-bold">     77</span>         # occurs in an exception handler.

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/util/compat.py:208</span>, in <span class="ansi-cyan-fg">raise_</span><span class="ansi-blue-fg">(***failed resolving arguments***)</span>
<span class="ansi-green-intense-fg ansi-bold">    205</span>     exception.__cause__ = replace_context
<span class="ansi-green-intense-fg ansi-bold">    207</span> try:
<span class="ansi-green-fg">--&gt; 208</span>     raise exception
<span class="ansi-green-intense-fg ansi-bold">    209</span> finally:
<span class="ansi-green-intense-fg ansi-bold">    210</span>     # credit to
<span class="ansi-green-intense-fg ansi-bold">    211</span>     # https://cosmicpercolator.com/2016/01/13/exception-leaks-in-python-2-and-3/
<span class="ansi-green-intense-fg ansi-bold">    212</span>     # as the __traceback__ object creates a cycle
<span class="ansi-green-intense-fg ansi-bold">    213</span>     del exception, replace_context, from_, with_traceback

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/pool/base.py:661</span>, in <span class="ansi-cyan-fg">_ConnectionRecord.__connect</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    659</span> try:
<span class="ansi-green-intense-fg ansi-bold">    660</span>     self.starttime = time.time()
<span class="ansi-green-fg">--&gt; 661</span>     self.dbapi_connection = connection = pool._invoke_creator(self)
<span class="ansi-green-intense-fg ansi-bold">    662</span>     pool.logger.debug("Created new connection %r", connection)
<span class="ansi-green-intense-fg ansi-bold">    663</span>     self.fresh = True

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/engine/create.py:590</span>, in <span class="ansi-cyan-fg">create_engine.&lt;locals&gt;.connect</span><span class="ansi-blue-fg">(connection_record)</span>
<span class="ansi-green-intense-fg ansi-bold">    588</span>         if connection is not None:
<span class="ansi-green-intense-fg ansi-bold">    589</span>             return connection
<span class="ansi-green-fg">--&gt; 590</span> return dialect.connect(*cargs, **cparams)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.10/site-packages/sqlalchemy/engine/default.py:597</span>, in <span class="ansi-cyan-fg">DefaultDialect.connect</span><span class="ansi-blue-fg">(self, *cargs, **cparams)</span>
<span class="ansi-green-intense-fg ansi-bold">    595</span> def connect(self, *cargs, **cparams):
<span class="ansi-green-intense-fg ansi-bold">    596</span>     # inherits the docstring from interfaces.Dialect.connect
<span class="ansi-green-fg">--&gt; 597</span>     return self.dbapi.connect(*cargs, **cparams)

<span class="ansi-red-fg">OperationalError</span>: (sqlite3.OperationalError) unable to open database file
(Background on this error at: https://sqlalche.me/e/14/e3q8)</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Reading-users-table-in-sqlite.db">
<a class="anchor" href="#Reading-users-table-in-sqlite.db" aria-hidden="true"><span class="octicon octicon-link"></span></a>Reading users table in sqlite.db<a class="anchor-link" href="#Reading-users-table-in-sqlite.db"> </a>
</h2>
<blockquote>
<p>Uses SQLALchemy query.all method to read data</p>
</blockquote>
<ul>
<li>Comment on purpose of following<ol>
<li>User.query.all</li>
<li>json_ready assignment, google List Comprehension</li>
</ol>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># SQLAlchemy extracts all users from database, turns each user into JSON</span>
<span class="k">def</span> <span class="nf">read</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="n">table</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">json_ready</span> <span class="o">=</span> <span class="p">[</span><span class="n">user</span><span class="o">.</span><span class="n">read</span><span class="p">()</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">table</span><span class="p">]</span> <span class="c1"># "List Comprehensions", for each user add user.read() to list</span>
    <span class="k">return</span> <span class="n">json_ready</span>

<span class="n">read</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">readCar</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="n">table</span> <span class="o">=</span> <span class="n">Car</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">json_ready</span> <span class="o">=</span> <span class="p">[</span><span class="n">car</span><span class="o">.</span><span class="n">read</span><span class="p">()</span> <span class="k">for</span> <span class="n">car</span> <span class="ow">in</span> <span class="n">table</span><span class="p">]</span> <span class="c1"># "List Comprehensions", for each car add car.read() to list</span>
    <span class="k">return</span> <span class="n">json_ready</span>

<span class="n">readCar</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Hacks">
<a class="anchor" href="#Hacks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Hacks<a class="anchor-link" href="#Hacks"> </a>
</h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Update-functionality">
<a class="anchor" href="#Update-functionality" aria-hidden="true"><span class="octicon octicon-link"></span></a>Update functionality<a class="anchor-link" href="#Update-functionality"> </a>
</h2>
<ul>
<li>First for the Users</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="n">uid</span><span class="p">,</span> <span class="n">new_name</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">User</span><span class="p">)</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">_uid</span><span class="o">=</span><span class="n">uid</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Found</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="n">user</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

            <span class="n">user</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">new_name</span><span class="p">)</span>
        
            <span class="k">return</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span> <span class="c1"># keep going</span>

<span class="n">uid</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter your user id:"</span><span class="p">)</span>
<span class="n">new_name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter new user name:"</span><span class="p">)</span>
<span class="n">update</span><span class="p">(</span><span class="n">uid</span><span class="p">,</span> <span class="n">new_name</span><span class="p">)</span>
    
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Found
 {'id': 7, 'name': 'Vivian Ni', 'uid': 'vivian', 'dob': '05-13-2006', 'age': 16}
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>for the cars</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">updateCar</span><span class="p">(</span><span class="n">uid</span><span class="p">,</span> <span class="n">new_brand</span><span class="p">,</span> <span class="n">new_color</span><span class="p">,</span> <span class="n">new_powersource</span><span class="p">,</span> <span class="n">new_type</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="n">car</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Car</span><span class="p">)</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">_uid</span><span class="o">=</span><span class="n">uid</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Found</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="n">car</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

            <span class="n">car</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">new_brand</span><span class="p">,</span> <span class="n">new_color</span><span class="p">,</span> <span class="n">new_powersource</span><span class="p">,</span> <span class="n">new_type</span><span class="p">)</span>
        
            <span class="k">return</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span> <span class="c1"># keep going</span>

<span class="n">uid</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter your car id:"</span><span class="p">)</span>

<span class="n">new_brand</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter new brand:"</span><span class="p">)</span>
<span class="n">new_color</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter new color:"</span><span class="p">)</span>
<span class="n">new_powersource</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter new powersource:"</span><span class="p">)</span>
<span class="n">new_type</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter new type:"</span><span class="p">)</span>

<span class="n">updateCar</span><span class="p">(</span><span class="n">uid</span><span class="p">,</span> <span class="n">new_brand</span><span class="p">,</span> <span class="n">new_color</span><span class="p">,</span> <span class="n">new_powersource</span><span class="p">,</span> <span class="n">new_type</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Found
 {'id': 36, 'brand': 'tesla', 'color': 'pink', 'powersource': 'ice', 'type': 'sedan', 'uid': '36'}
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Delete-functionality">
<a class="anchor" href="#Delete-functionality" aria-hidden="true"><span class="octicon octicon-link"></span></a>Delete functionality<a class="anchor-link" href="#Delete-functionality"> </a>
</h2>
<ul>
<li>for the users</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="n">uid</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">User</span><span class="p">)</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">_uid</span><span class="o">=</span><span class="n">uid</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Found</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="n">user</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

            <span class="n">user</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
        
            <span class="k">return</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span> <span class="c1"># keep going</span>

<span class="n">uid</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter your user id:"</span><span class="p">)</span>
<span class="n">delete</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>for the cars</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">deleteCar</span><span class="p">(</span><span class="n">uid</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="n">car</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Car</span><span class="p">)</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">_uid</span><span class="o">=</span><span class="n">uid</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Found</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="n">car</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

            <span class="n">car</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
        
            <span class="k">return</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span> <span class="c1"># keep going</span>

<span class="n">uid</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter your car uid:"</span><span class="p">)</span>
<span class="n">deleteCar</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Found
 {'id': 36, 'brand': 'tesla', 'color': 'pink', 'powersource': 'electric', 'type': 'sedan', 'uid': '36'}
</pre>
</div>
</div>

</div>
</div>

</div>
    

</div>



  </div><a class="u-url" href="/FastPages/2023/03/13/AP-unit2-4a.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/FastPages/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="https://vivianknee.github.io/FastPages/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/FastPages/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>CSP Fastpages</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li>
  <a rel="me" href="https://github.com/nighthawkcoders" target="_blank" title="github">
    <svg class="svg-icon grey">
      <use xlink:href="/FastPages/assets/minima-social-icons.svg#github"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://twitter.com/NighthawkCoding" target="_blank" title="twitter">
    <svg class="svg-icon grey">
      <use xlink:href="/FastPages/assets/minima-social-icons.svg#twitter"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://www.youtube.com/channel/UClIKOsDS5dsfzFA3zveDT3Q" target="_blank" title="youtube">
    <svg class="svg-icon grey">
      <use xlink:href="/FastPages/assets/minima-social-icons.svg#youtube"></use>
    </svg>
  </a>
</li>
</ul>
</div>

  </div>

</footer>
</body>

</html>
